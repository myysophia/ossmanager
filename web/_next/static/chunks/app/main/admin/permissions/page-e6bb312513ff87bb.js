(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2893],{4316:(e,s,t)=>{"use strict";t.d(s,{l:()=>x});var a=t(95155),r=t(78038),i=t(97711),n=t(76783),l=t(73134),o=t(12115),c=t(92622),d=t(30044),u=t(47415);let h=(0,d.R)(function(e,s){let{children:t,placeholder:r,className:i,...n}=e;return(0,a.jsxs)(u.B.select,{...n,ref:s,className:(0,c.cx)("chakra-select",i),children:[r&&(0,a.jsx)("option",{value:"",children:r}),t]})});h.displayName="SelectField";var m=t(17248),p=t(17891);let x=(0,d.R)((e,s)=>{var t;let o=(0,p.o)("Select",e),{rootProps:c,placeholder:d,icon:x,color:g,height:j,h:f,minH:y,minHeight:A,iconColor:b,iconSize:k,..._}=(0,r.M)(e),[w,S]=(0,n.l)(_,i.GF),I=(0,m.t)(S),R={paddingEnd:"2rem",...o.field,_focus:{zIndex:"unset",...null===(t=o.field)||void 0===t?void 0:t._focus}};return(0,a.jsxs)(u.B.div,{className:"chakra-select__wrapper",__css:{width:"100%",height:"fit-content",position:"relative",color:g},...w,...c,children:[(0,a.jsx)(h,{ref:s,height:null!=f?f:j,minH:null!=y?y:A,placeholder:d,...I,__css:R,children:e.children}),(0,a.jsx)(v,{"data-disabled":(0,l.s)(I.disabled),...(b||g)&&{color:b||g},__css:o.icon,...k&&{fontSize:k},children:x})]})});x.displayName="Select";let g=e=>(0,a.jsx)("svg",{viewBox:"0 0 24 24",...e,children:(0,a.jsx)("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),j=(0,u.B)("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),v=e=>{let{children:s=(0,a.jsx)(g,{}),...t}=e,r=(0,o.cloneElement)(s,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return(0,a.jsx)(j,{...t,className:"chakra-select__icon-wrapper",children:(0,o.isValidElement)(s)?r:null})};v.displayName="SelectIcon"},6070:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>W});var a=t(95155),r=t(12115),i=t(23006),n=t(52017),l=t(77700),o=t(58727),c=t(42066),d=t(49747),u=t(33636),h=t(77978),m=t(37824),p=t(83382),x=t(47272),g=t(76122),j=t(66080),v=t(24710),f=t(80436),y=t(39376),A=t(58670),b=t(84002),k=t(91985),_=t(29358),w=t(32643),S=t(7283),I=t(89342),R=t(25442),P=t(64688),N=t(61549),T=t(27104),C=t(19782),E=t(5643),M=t(26418),z=t(79175),B=t(88254),U=t(4316),H=t(49174);function L(e){let{isOpen:s,onClose:t,permission:n,onSuccess:l}=e,[o,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(""),[p,x]=(0,r.useState)(""),[g,j]=(0,r.useState)(""),[v,f]=(0,r.useState)(!1),y=(0,i.d)();(0,r.useEffect)(()=>{n?(c(n.name),m(n.description||""),x(n.resource),j(n.action)):(c(""),m(""),x(""),j(""))},[n]);let A=async()=>{if(!o||!p||!g){y({title:"请填写必填字段",status:"error",duration:3e3,isClosable:!0});return}try{f(!0),n?(await S.IW.updatePermission(n.id,{name:o,description:d,resource:p,action:g}),y({title:"更新成功",status:"success",duration:3e3,isClosable:!0})):(await S.IW.createPermission({name:o,description:d,resource:p,action:g}),y({title:"创建成功",status:"success",duration:3e3,isClosable:!0})),l(),t()}catch(e){y({title:n?"更新失败":"创建失败",description:e instanceof Error?e.message:"未知错误",status:"error",duration:3e3,isClosable:!0})}finally{f(!1)}};return(0,a.jsxs)(R.aF,{isOpen:s,onClose:t,children:[(0,a.jsx)(P.m,{}),(0,a.jsxs)(N.$,{children:[(0,a.jsx)(T.r,{children:n?"编辑权限":"新建权限"}),(0,a.jsx)(C.s,{}),(0,a.jsxs)(E.c,{children:[(0,a.jsxs)(M.MJ,{isRequired:!0,mb:4,children:[(0,a.jsx)(z.l,{children:"权限名称"}),(0,a.jsx)(u.p,{value:o,onChange:e=>c(e.target.value),placeholder:"请输入权限名称"})]}),(0,a.jsxs)(M.MJ,{mb:4,children:[(0,a.jsx)(z.l,{children:"描述"}),(0,a.jsx)(B.T,{value:d,onChange:e=>m(e.target.value),placeholder:"请输入权限描述"})]}),(0,a.jsxs)(M.MJ,{isRequired:!0,mb:4,children:[(0,a.jsx)(z.l,{children:"资源"}),(0,a.jsxs)(U.l,{value:p,onChange:e=>x(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"请选择资源"}),(0,a.jsx)("option",{value:"user",children:"用户"}),(0,a.jsx)("option",{value:"role",children:"角色"}),(0,a.jsx)("option",{value:"permission",children:"权限"}),(0,a.jsx)("option",{value:"file",children:"文件"}),(0,a.jsx)("option",{value:"storage",children:"存储"})]})]}),(0,a.jsxs)(M.MJ,{isRequired:!0,children:[(0,a.jsx)(z.l,{children:"操作"}),(0,a.jsxs)(U.l,{value:g,onChange:e=>j(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"请选择操作"}),(0,a.jsx)("option",{value:"create",children:"创建"}),(0,a.jsx)("option",{value:"read",children:"读取"}),(0,a.jsx)("option",{value:"update",children:"更新"}),(0,a.jsx)("option",{value:"delete",children:"删除"}),(0,a.jsx)("option",{value:"list",children:"列表"})]})]})]}),(0,a.jsxs)(H.j,{children:[(0,a.jsx)(h.$,{variant:"ghost",mr:3,onClick:t,children:"取消"}),(0,a.jsx)(h.$,{colorScheme:"blue",onClick:A,isLoading:v,children:n?"更新":"创建"})]})]})]})}function q(){let[e,s]=(0,r.useState)([]),[t,I]=(0,r.useState)(0),[R,P]=(0,r.useState)(1),[N,T]=(0,r.useState)(10),[C,E]=(0,r.useState)(""),[M,z]=(0,r.useState)(!1),B=(0,i.d)(),{isOpen:U,onOpen:H,onClose:q}=(0,n.j)(),[W,O]=(0,r.useState)(null),J=async()=>{try{z(!0);let e=await S.IW.getPermissions({page:R,limit:N,search:C||void 0});s(e.permissions),I(e.total)}catch(e){B({title:"获取权限列表失败",description:e instanceof Error?e.message:"未知错误",status:"error",duration:3e3,isClosable:!0})}finally{z(!1)}};(0,r.useEffect)(()=>{J()},[R,N,C]);let V=e=>{E(e),P(1)},F=e=>{O(e),H()},$=async e=>{if(confirm("确定要删除该权限吗？"))try{await S.IW.deletePermission(e),B({title:"删除成功",status:"success",duration:3e3,isClosable:!0}),J()}catch(e){B({title:"删除失败",description:e instanceof Error?e.message:"未知错误",status:"error",duration:3e3,isClosable:!0})}},D=Math.ceil(t/N),G=R>1,Y=R<D;return(0,a.jsxs)(l.a,{p:4,children:[(0,a.jsxs)(o.z,{mb:4,justify:"space-between",children:[(0,a.jsxs)(c.M,{maxW:"300px",children:[(0,a.jsx)(d.W,{pointerEvents:"none",children:(0,a.jsx)(b.W,{color:"gray.300"})}),(0,a.jsx)(u.p,{placeholder:"搜索权限...",value:C,onChange:e=>V(e.target.value)})]}),(0,a.jsx)(h.$,{leftIcon:(0,a.jsx)(k.R,{}),colorScheme:"blue",onClick:()=>{O(null),H()},children:"新建权限"})]}),(0,a.jsxs)(m.X,{variant:"simple",children:[(0,a.jsx)(p.d,{children:(0,a.jsxs)(x.Tr,{children:[(0,a.jsx)(g.Th,{children:"权限名称"}),(0,a.jsx)(g.Th,{children:"描述"}),(0,a.jsx)(g.Th,{children:"资源"}),(0,a.jsx)(g.Th,{children:"操作"}),(0,a.jsx)(g.Th,{children:"创建时间"}),(0,a.jsx)(g.Th,{children:"操作"})]})}),(0,a.jsx)(j.N,{children:e.map(e=>(0,a.jsxs)(x.Tr,{children:[(0,a.jsx)(v.Td,{children:e.name}),(0,a.jsx)(v.Td,{children:e.description||"-"}),(0,a.jsx)(v.Td,{children:(0,a.jsx)(f.E,{colorScheme:"blue",children:e.resource})}),(0,a.jsx)(v.Td,{children:(0,a.jsx)(f.E,{colorScheme:"green",children:e.action})}),(0,a.jsx)(v.Td,{children:new Date(e.created_at).toLocaleString()}),(0,a.jsx)(v.Td,{children:(0,a.jsxs)(o.z,{spacing:2,children:[(0,a.jsx)(y.K,{"aria-label":"编辑权限",icon:(0,a.jsx)(_.q,{}),size:"sm",onClick:()=>F(e)}),(0,a.jsx)(y.K,{"aria-label":"删除权限",icon:(0,a.jsx)(w.d,{}),size:"sm",colorScheme:"red",onClick:()=>$(e.id)})]})})]},e.id))})]}),(0,a.jsxs)(o.z,{justify:"space-between",mt:4,children:[(0,a.jsxs)(A.E,{children:["第 ",R," 页，共 ",D," 页"]}),(0,a.jsxs)(o.z,{children:[(0,a.jsx)(h.$,{size:"sm",onClick:()=>P(R-1),isDisabled:!G,children:"上一页"}),(0,a.jsx)(h.$,{size:"sm",onClick:()=>P(R+1),isDisabled:!Y,children:"下一页"})]})]}),(0,a.jsx)(L,{isOpen:U,onClose:q,permission:W,onSuccess:J})]})}function W(){return(0,a.jsx)(I.O,{requireManager:!0,children:(0,a.jsx)(q,{})})}},7161:(e,s,t)=>{"use strict";t.d(s,{HY:()=>r,Hl:()=>a});let a=()=>{console.log("\uD83D\uDD10 认证令牌过期，清除认证信息并重定向到登录页..."),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("refreshToken"),document.cookie="token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",window.location.pathname.includes("/auth/login")||(window.location.href="/auth/login")},r=e=>{var s;return e&&"object"==typeof e&&"response"in e&&(null===(s=e.response)||void 0===s?void 0:s.status)===401}},7283:(e,s,t)=>{"use strict";t.d(s,{IW:()=>n,NR:()=>i,QS:()=>r});var a=t(96918);let r={getUsers:async e=>{console.log("UserAPI.getUsers called with params:",e);let s=await a.A.get("/users",{params:e});return console.log("UserAPI.getUsers raw response:",s),s.data},getUser:async e=>(await a.A.get("/users/".concat(e))).data,createUser:async e=>(await a.A.post("/users",e)).data,updateUser:async(e,s)=>(await a.A.put("/users/".concat(e),s)).data,deleteUser:async e=>{await a.A.delete("/users/".concat(e))}},i={getRoles:async e=>{try{let i=(await a.A.get("/roles",{params:e})).data;if(i&&i.data&&Array.isArray(i.data.items)){let e=i.data.items.map(e=>{var s,t,a;return{id:e.id,name:null!==(s=e.name)&&void 0!==s?s:"",description:null!==(t=e.description)&&void 0!==t?t:"",permissions:Array.isArray(e.permissions)?e.permissions:[],created_at:null!==(a=e.created_at)&&void 0!==a?a:"",...e}});return{roles:e,total:e.length}}if(Array.isArray(i)){let e=i.map(e=>{var s,t,a;return{id:e.id,name:null!==(s=e.name)&&void 0!==s?s:"",description:null!==(t=e.description)&&void 0!==t?t:"",permissions:Array.isArray(e.permissions)?e.permissions:[],created_at:null!==(a=e.created_at)&&void 0!==a?a:"",...e}});return{roles:e,total:e.length}}if(i&&"object"==typeof i&&i.id){var s,t,r;return{roles:[{id:i.id,name:null!==(s=i.name)&&void 0!==s?s:"",description:null!==(t=i.description)&&void 0!==t?t:"",permissions:Array.isArray(i.permissions)?i.permissions:[],created_at:null!==(r=i.created_at)&&void 0!==r?r:"",...i}],total:1}}return{roles:[],total:0}}catch(e){return{roles:[],total:0}}},getRole:async e=>(await a.A.get("/roles/".concat(e))).data,createRole:async e=>(await a.A.post("/roles",e)).data,updateRole:async(e,s)=>(await a.A.put("/roles/".concat(e),s)).data,deleteRole:async e=>{await a.A.delete("/roles/".concat(e))},getRegionBucketMappings:async e=>(await a.A.get("/region-bucket-mappings",{params:e})).data,getRoleRegionBucketAccess:async e=>(await a.A.get("/roles/".concat(e,"/bucket-access"))).data,updateRoleRegionBucketAccess:async(e,s)=>{await a.A.put("/roles/".concat(e,"/bucket-access"),s)},deleteRoleRegionBucketAccess:async(e,s)=>{await a.A.delete("/roles/".concat(e,"/accessible-buckets/").concat(s))}},n={getPermissions:async e=>{try{let s=await a.A.get("/permissions",{params:e});if(console.log("PermissionAPI.getPermissions response:",s),console.log("PermissionAPI.getPermissions response.data:",s.data),s.data&&s.data.items)return console.log("PermissionAPI.getPermissions response.data.items:",s.data.items),{permissions:s.data.items,total:s.data.total};if(Array.isArray(s.data))return{permissions:s.data,total:s.data.length};return{permissions:[],total:0}}catch(e){throw console.error("PermissionAPI.getPermissions error:",e),e}},getPermission:async e=>(await a.A.get("/permissions/".concat(e))).data,createPermission:async e=>(await a.A.post("/permissions",e)).data,updatePermission:async(e,s)=>(await a.A.put("/permissions/".concat(e),s)).data,deletePermission:async e=>{await a.A.delete("/permissions/".concat(e))}}},29358:(e,s,t)=>{"use strict";t.d(s,{q:()=>r});var a=t(95155);let r=(0,t(24345).w)({displayName:"EditIcon",path:(0,a.jsxs)("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,a.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})},32643:(e,s,t)=>{"use strict";t.d(s,{d:()=>r});var a=t(95155);let r=(0,t(24345).w)({displayName:"DeleteIcon",path:(0,a.jsx)("g",{fill:"currentColor",children:(0,a.jsx)("path",{d:"M19.452 7.5H4.547a.5.5 0 00-.5.545l1.287 14.136A2 2 0 007.326 24h9.347a2 2 0 001.992-1.819L19.95 8.045a.5.5 0 00-.129-.382.5.5 0 00-.369-.163zm-9.2 13a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zm5 0a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zM22 4h-4.75a.25.25 0 01-.25-.25V2.5A2.5 2.5 0 0014.5 0h-5A2.5 2.5 0 007 2.5v1.25a.25.25 0 01-.25.25H2a1 1 0 000 2h20a1 1 0 000-2zM9 3.75V2.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v1.25a.25.25 0 01-.25.25h-5.5A.25.25 0 019 3.75z"})})})},33636:(e,s,t)=>{"use strict";t.d(s,{p:()=>d});var a=t(95155),r=t(78038),i=t(92622),n=t(17248),l=t(30044),o=t(17891),c=t(47415);let d=(0,l.R)(function(e,s){let{htmlSize:t,...l}=e,d=(0,o.o)("Input",l),u=(0,r.M)(l),h=(0,n.t)(u),m=(0,i.cx)("chakra-input",e.className);return(0,a.jsx)(c.B.input,{size:t,...h,__css:d.field,ref:s,className:m})});d.displayName="Input",d.id="Input"},35695:(e,s,t)=>{"use strict";var a=t(18999);t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},58670:(e,s,t)=>{"use strict";t.d(s,{E:()=>d});var a=t(95155),r=t(78038),i=t(85720),n=t(92622),l=t(30044),o=t(17891),c=t(47415);let d=(0,l.R)(function(e,s){let t=(0,o.V)("Text",e),{className:l,align:d,decoration:u,casing:h,...m}=(0,r.M)(e),p=(0,i.o)({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return(0,a.jsx)(c.B.p,{ref:s,className:(0,n.cx)("chakra-text",e.className),...p,...m,__css:t})});d.displayName="Text"},67111:(e,s,t)=>{Promise.resolve().then(t.bind(t,6070))},76783:(e,s,t)=>{"use strict";function a(e,s){let t={},a={};for(let[r,i]of Object.entries(e))s.includes(r)?t[r]=i:a[r]=i;return[t,a]}t.d(s,{l:()=>a})},79175:(e,s,t)=>{"use strict";t.d(s,{l:()=>d});var a=t(95155),r=t(78038),i=t(92622),n=t(26418),l=t(30044),o=t(17891),c=t(47415);let d=(0,l.R)(function(e,s){var t;let l=(0,o.V)("FormLabel",e),d=(0,r.M)(e),{className:h,children:m,requiredIndicator:p=(0,a.jsx)(u,{}),optionalIndicator:x=null,...g}=d,j=(0,n.Uc)(),v=null!==(t=null==j?void 0:j.getLabelProps(g,s))&&void 0!==t?t:{ref:s,...g};return(0,a.jsxs)(c.B.label,{...v,className:(0,i.cx)("chakra-form__label",d.className),__css:{display:"block",textAlign:"start",...l},children:[m,(null==j?void 0:j.isRequired)?p:x]})});d.displayName="FormLabel";let u=(0,l.R)(function(e,s){let t=(0,n.Uc)(),r=(0,n.TP)();if(!(null==t?void 0:t.isRequired))return null;let l=(0,i.cx)("chakra-form__required-indicator",e.className);return(0,a.jsx)(c.B.span,{...null==t?void 0:t.getRequiredIndicatorProps(e,s),__css:r.requiredIndicator,className:l})});u.displayName="RequiredIndicator"},80436:(e,s,t)=>{"use strict";t.d(s,{E:()=>c});var a=t(95155),r=t(78038),i=t(92622),n=t(30044),l=t(17891),o=t(47415);let c=(0,n.R)(function(e,s){let t=(0,l.V)("Badge",e),{className:n,...c}=(0,r.M)(e);return(0,a.jsx)(o.B.span,{ref:s,className:(0,i.cx)("chakra-badge",e.className),...c,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...t}})});c.displayName="Badge"},84002:(e,s,t)=>{"use strict";t.d(s,{W:()=>a});let a=(0,t(24345).w)({d:"M23.384,21.619,16.855,15.09a9.284,9.284,0,1,0-1.768,1.768l6.529,6.529a1.266,1.266,0,0,0,1.768,0A1.251,1.251,0,0,0,23.384,21.619ZM2.75,9.5a6.75,6.75,0,1,1,6.75,6.75A6.758,6.758,0,0,1,2.75,9.5Z",displayName:"SearchIcon"})},88254:(e,s,t)=>{"use strict";t.d(s,{T:()=>h});var a=t(95155),r=t(78038),i=t(3304),n=t(92622),l=t(17248),o=t(30044),c=t(17891),d=t(47415);let u=["h","minH","height","minHeight"],h=(0,o.R)((e,s)=>{let t=(0,c.V)("Textarea",e),{className:o,rows:h,...m}=(0,r.M)(e),p=(0,l.t)(m),x=h?(0,i.c)(t,u):t;return(0,a.jsx)(d.B.textarea,{ref:s,rows:h,...p,className:(0,n.cx)("chakra-textarea",o),__css:x})});h.displayName="Textarea"},89342:(e,s,t)=>{"use strict";t.d(s,{O:()=>x});var a=t(95155),r=t(12115),i=t(35695),n=t(96918),l=t(7161);let o=()=>{let[e,s]=(0,r.useState)(null),[t,a]=(0,r.useState)(!0),o=(0,i.useRouter)();(0,r.useEffect)(()=>{let e=localStorage.getItem("user"),t=localStorage.getItem("token");if(t&&!document.cookie.includes("token=")&&(document.cookie="token=".concat(t,"; path=/; ").concat("secure;"," samesite=strict; max-age=86400")),e)try{let t=JSON.parse(e);t&&t.permissions&&(s(t),a(!1))}catch(e){console.error("解析本地用户数据失败:",e)}c()},[]);let c=async()=>{try{let e=(await n.A.get("/user/current")).data;if(e&&e.permissions){let t={...e,permissions:Array.isArray(e.permissions)?e.permissions:[]};s(t),localStorage.setItem("user",JSON.stringify(t))}else{let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);s(t)}else o.push("/auth/login")}}catch(t){if(console.error("认证检查失败:",t),(0,l.HY)(t)){s(null),(0,l.Hl)();return}let e=localStorage.getItem("user");e?s(JSON.parse(e)):o.push("/auth/login")}finally{a(!1)}},d=(s,t)=>!!e&&!!e.permissions&&e.permissions.some(e=>t?e.resource===s&&e.action===t:e.resource===s);return{user:e,loading:t,hasPermission:d,hasManagerPermission:()=>d("MANAGER"),logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),document.cookie="token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",s(null),o.push("/auth/login")},checkAuth:c}};var c=t(77700),d=t(84492),u=t(79788),h=t(21688),m=t(75569),p=t(58670);let x=e=>{let{children:s,requiredPermission:t,requireManager:r=!1,fallbackPath:n="/main/dashboard"}=e,{user:l,loading:x,hasPermission:g,hasManagerPermission:j}=o(),v=(0,i.useRouter)();return x?(0,a.jsx)(c.a,{minH:"100vh",display:"flex",alignItems:"center",justifyContent:"center",children:(0,a.jsx)(d.y,{size:"lg",color:"blue.500"})}):l?r&&!j()?(0,a.jsx)(c.a,{p:8,children:(0,a.jsxs)(u.F,{status:"error",children:[(0,a.jsx)(h._,{}),(0,a.jsxs)(m.T,{align:"start",spacing:2,children:[(0,a.jsx)(p.E,{fontWeight:"bold",children:"访问被拒绝"}),(0,a.jsx)(p.E,{children:"您没有访问此页面的权限。需要管理员权限。"})]})]})}):t&&!g(t.resource,t.action)?(0,a.jsx)(c.a,{p:8,children:(0,a.jsxs)(u.F,{status:"error",children:[(0,a.jsx)(h._,{}),(0,a.jsxs)(m.T,{align:"start",spacing:2,children:[(0,a.jsx)(p.E,{fontWeight:"bold",children:"访问被拒绝"}),(0,a.jsxs)(p.E,{children:["您没有访问此页面的权限。需要权限: ",t.resource,t.action&&" - ".concat(t.action)]})]})]})}):(0,a.jsx)(a.Fragment,{children:s}):(v.push("/auth/login"),null)}},91985:(e,s,t)=>{"use strict";t.d(s,{R:()=>a});let a=(0,t(24345).w)({d:"M0,12a1.5,1.5,0,0,0,1.5,1.5h8.75a.25.25,0,0,1,.25.25V22.5a1.5,1.5,0,0,0,3,0V13.75a.25.25,0,0,1,.25-.25H22.5a1.5,1.5,0,0,0,0-3H13.75a.25.25,0,0,1-.25-.25V1.5a1.5,1.5,0,0,0-3,0v8.75a.25.25,0,0,1-.25.25H1.5A1.5,1.5,0,0,0,0,12Z",displayName:"AddIcon"})},96918:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(23464),r=t(7161),i=t(87358);let n=a.A.create({baseURL:i.env.NEXT_PUBLIC_API_URL||"http://localhost:8081/api/v1",timeout:36e5,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{{let s=localStorage.getItem("token");s&&(e.headers.Authorization="Bearer ".concat(s))}return console.log("发送请求:",{url:e.url,method:e.method,baseURL:e.baseURL,headers:e.headers,fullPath:"".concat(e.baseURL).concat(e.url)}),e},e=>(console.error("请求拦截器错误:",e),Promise.reject(e))),n.interceptors.response.use(e=>{console.log("收到响应:",{url:e.config.url,status:e.status,data:e.data});let s=e.data;return s&&"object"==typeof s&&void 0!==s.code?0!==s.code&&200!==s.code?(console.error("API响应错误:",s),Promise.reject(Error(s.message||"请求失败"))):s:e},e=>{var s,t,a;return console.error("请求失败:",{url:null===(s=e.config)||void 0===s?void 0:s.url,message:e.message,response:null===(t=e.response)||void 0===t?void 0:t.data}),e.response?401===e.response.status?(0,r.Hl)():console.error("API错误:",(null===(a=e.response.data)||void 0===a?void 0:a.message)||"请求失败"):e.request?console.error("网络错误: 请检查网络连接"):console.error("请求错误:",e.message||"发生未知错误"),Promise.reject(e)});let l=n}},e=>{var s=s=>e(e.s=s);e.O(0,[8791,6829,6980,7039,2210,3464,3513,5030,8441,1684,7358],()=>s(67111)),_N_E=e.O()}]);