(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4754],{3740:(e,r,t)=>{"use strict";t.d(r,{I:()=>c});var n=t(95155),o=t(92622),s=t(30044),a=t(17891),i=t(47415);let l={path:(0,n.jsxs)("g",{stroke:"currentColor",strokeWidth:"1.5",children:[(0,n.jsx)("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),(0,n.jsx)("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),(0,n.jsx)("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},c=(0,s.R)((e,r)=>{let{as:t,viewBox:s,color:c="currentColor",focusable:u=!1,children:d,className:m,__css:f,...p}=e,h=(0,o.cx)("chakra-icon",m),g=(0,a.V)("Icon",e),v={ref:r,focusable:u,className:h,__css:{w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:c,...f,...g}},x=null!=s?s:l.viewBox;if(t&&"string"!=typeof t)return(0,n.jsx)(i.B.svg,{as:t,...v,...p});let y=null!=d?d:l.path;return(0,n.jsx)(i.B.svg,{verticalAlign:"middle",viewBox:x,...v,...p,children:y})});c.displayName="Icon"},4342:(e,r,t)=>{"use strict";t.d(r,{Sw:()=>l,_N:()=>u,He:()=>f,cR:()=>p,ZM:()=>c,mC:()=>d});var n=t(61214),o=t(95155),s=t(3740);function a(e){return(0,o.jsx)(s.I,{viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var i=t(84492);let[l,c]=(0,n.q)({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[u,d]=(0,n.q)({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),m={info:{icon:function(e){return(0,o.jsx)(s.I,{viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})},colorScheme:"blue"},warning:{icon:a,colorScheme:"orange"},success:{icon:function(e){return(0,o.jsx)(s.I,{viewBox:"0 0 24 24",...e,children:(0,o.jsx)("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})},colorScheme:"green"},error:{icon:a,colorScheme:"red"},loading:{icon:i.y,colorScheme:"blue"}};function f(e){return m[e].colorScheme}function p(e){return m[e].icon}},7161:(e,r,t)=>{"use strict";t.d(r,{HY:()=>o,Hl:()=>n});let n=()=>{console.log("\uD83D\uDD10 认证令牌过期，清除认证信息并重定向到登录页..."),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("refreshToken"),document.cookie="token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",window.location.pathname.includes("/auth/login")||(window.location.href="/auth/login")},o=e=>{var r;return e&&"object"==typeof e&&"response"in e&&(null===(r=e.response)||void 0===r?void 0:r.status)===401}},9138:(e,r,t)=>{"use strict";t.d(r,{a:()=>o});var n=t(12115);function o(e){return n.Children.toArray(e).filter(e=>(0,n.isValidElement)(e))}},11649:(e,r,t)=>{"use strict";t.d(r,{D:()=>c});var n=t(95155),o=t(78038),s=t(92622),a=t(30044),i=t(17891),l=t(47415);let c=(0,a.R)(function(e,r){let t=(0,i.V)("Heading",e),{className:a,...c}=(0,o.M)(e);return(0,n.jsx)(l.B.h2,{ref:r,className:(0,s.cx)("chakra-heading",e.className),...c,__css:t})});c.displayName="Heading"},12224:(e,r,t)=>{"use strict";t.d(r,{_:()=>d});var n=t(26335);function o(e){return(0,n.Gv)(e)&&e.reference?e.reference:String(e)}let s=(e,...r)=>r.map(o).join(` ${e} `).replace(/calc/g,""),a=(...e)=>`calc(${s("+",...e)})`,i=(...e)=>`calc(${s("-",...e)})`,l=(...e)=>`calc(${s("*",...e)})`,c=(...e)=>`calc(${s("/",...e)})`,u=e=>{let r=o(e);return null==r||Number.isNaN(parseFloat(r))?l(r,-1):String(r).startsWith("-")?String(r).slice(1):`-${r}`},d=Object.assign(e=>({add:(...r)=>d(a(e,...r)),subtract:(...r)=>d(i(e,...r)),multiply:(...r)=>d(l(e,...r)),divide:(...r)=>d(c(e,...r)),negate:()=>d(u(e)),toString:()=>e.toString()}),{add:a,subtract:i,multiply:l,divide:c,negate:u})},13684:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>y});var n=t(95155),o=t(7098),s=t(3740),a=t(22900),i=t(77700),l=t(11649),c=t(58670),u=t(82391),d=t(29826),m=t(24369),f=t(58727),p=t(75569),h=t(35695),g=t(10351),v=t(89342);function x(){let e=(0,h.useRouter)();(0,o.dU)("white","gray.800");let r=(0,o.dU)("gray.200","gray.700"),t=[{title:"用户管理",description:"管理系统用户、角色和权限分配",icon:(0,n.jsx)(s.I,{as:g.JXP,boxSize:10,color:"purple.500"}),path:"/main/admin/users"},{title:"角色管理",description:"管理系统角色和权限配置",icon:(0,n.jsx)(s.I,{as:g.F5$,boxSize:10,color:"blue.500"}),path:"/main/admin/roles"},{title:"审计日志",description:"查看系统操作记录和用户行为日志",icon:(0,n.jsx)(s.I,{as:g.Wm,boxSize:10,color:"green.500"}),path:"/main/admin/audit"}];return(0,n.jsxs)(a.m,{maxW:"container.xl",py:10,children:[(0,n.jsxs)(i.a,{mb:8,children:[(0,n.jsx)(l.D,{size:"lg",mb:2,children:"后台管理"}),(0,n.jsx)(c.E,{color:"gray.500",children:"管理系统用户和查看操作日志"})]}),(0,n.jsx)(u.r,{columns:{base:1,md:2},spacing:6,children:t.map((t,o)=>(0,n.jsx)(d.Z,{borderWidth:"1px",borderColor:r,borderRadius:"lg",overflow:"hidden",transition:"all 0.3s",_hover:{transform:"translateY(-5px)",boxShadow:"lg",borderColor:"blue.300"},cursor:"pointer",onClick:()=>e.push(t.path),children:(0,n.jsx)(m.b,{children:(0,n.jsxs)(f.z,{spacing:6,align:"start",children:[(0,n.jsx)(i.a,{p:2,children:t.icon}),(0,n.jsxs)(p.T,{align:"start",spacing:1,children:[(0,n.jsx)(l.D,{size:"md",children:t.title}),(0,n.jsx)(c.E,{color:"gray.500",children:t.description})]})]})})},o))})]})}function y(){return(0,n.jsx)(v.O,{requireManager:!0,children:(0,n.jsx)(x,{})})}},21118:(e,r,t)=>{"use strict";t.d(r,{x:()=>a});var n=t(95155),o=t(30044),s=t(47415);let a=(0,o.R)(function(e,r){let{templateAreas:t,gap:o,rowGap:a,columnGap:i,column:l,row:c,autoFlow:u,autoRows:d,templateRows:m,autoColumns:f,templateColumns:p,...h}=e;return(0,n.jsx)(s.B.div,{ref:r,__css:{display:"grid",gridTemplateAreas:t,gridGap:o,gridRowGap:a,gridColumnGap:i,gridAutoColumns:f,gridColumn:l,gridRow:c,gridAutoFlow:u,gridAutoRows:d,gridTemplateRows:m,gridTemplateColumns:p},...h})});a.displayName="Grid"},21688:(e,r,t)=>{"use strict";t.d(r,{_:()=>i});var n=t(95155),o=t(92622),s=t(4342),a=t(47415);function i(e){let{status:r}=(0,s.ZM)(),t=(0,s.cR)(r),i=(0,s.mC)(),l="loading"===r?i.spinner:i.icon;return(0,n.jsx)(a.B.span,{display:"inherit","data-status":r,...e,className:(0,o.cx)("chakra-alert__icon",e.className),__css:l,children:e.children||(0,n.jsx)(t,{h:"100%",w:"100%"})})}i.displayName="AlertIcon"},22900:(e,r,t)=>{"use strict";t.d(r,{m:()=>c});var n=t(95155),o=t(78038),s=t(92622),a=t(30044),i=t(17891),l=t(47415);let c=(0,a.R)(function(e,r){let{className:t,centerContent:a,...c}=(0,o.M)(e),u=(0,i.V)("Container",e);return(0,n.jsx)(l.B.div,{ref:r,className:(0,s.cx)("chakra-container",t),...c,__css:{...u,...a&&{display:"flex",flexDirection:"column",alignItems:"center"}}})});c.displayName="Container"},24369:(e,r,t)=>{"use strict";t.d(r,{b:()=>l});var n=t(95155),o=t(92622),s=t(48092),a=t(30044),i=t(47415);let l=(0,a.R)(function(e,r){let{className:t,...a}=e,l=(0,s.Q)();return(0,n.jsx)(i.B.div,{ref:r,className:(0,o.cx)("chakra-card__body",t),__css:l.body,...a})})},26605:(e,r,t)=>{"use strict";function n(e){return e}function o(e){return e}function s(e){return{definePartsStyle:e=>e,defineMultiStyleConfig:r=>({parts:e,...r})}}t.d(r,{Dt:()=>o,H2:()=>n,YU:()=>s})},29826:(e,r,t)=>{"use strict";t.d(r,{Z:()=>u});var n=t(95155),o=t(78038),s=t(92622),a=t(48092),i=t(30044),l=t(17891),c=t(47415);let u=(0,i.R)(function(e,r){let{className:t,children:i,direction:u="column",justify:d,align:m,...f}=(0,o.M)(e),p=(0,l.o)("Card",e);return(0,n.jsx)(c.B.div,{ref:r,className:(0,s.cx)("chakra-card",t),__css:{display:"flex",flexDirection:u,justifyContent:d,alignItems:m,position:"relative",minWidth:0,wordWrap:"break-word",...p.container},...f,children:(0,n.jsx)(a.s,{value:p,children:i})})})},35695:(e,r,t)=>{"use strict";var n=t(18999);t.o(n,"usePathname")&&t.d(r,{usePathname:function(){return n.usePathname}}),t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}})},41654:(e,r,t)=>{"use strict";function n(e,r,t){let n=function(e,r=""){var t;return((t=function(e,r="-"){return e.replace(/\s+/g,r)}(`--${(function(e,r=""){return[r,e].filter(Boolean).join("-")})(e,r)}`.toString())).includes("\\.")?t:Number.isInteger(parseFloat(t.toString()))?t:t.replace(".","\\.")).replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}(e,t);return{variable:n,reference:`var(${n}${r?`, ${r}`:""})`}}function o(e,r){let t={};for(let o of r){if(Array.isArray(o)){let[r,s]=o;t[r]=n(`${e}-${r}`,s);continue}t[o]=n(`${e}-${o}`)}return t}t.d(r,{Vg:()=>n,lL:()=>o})},48092:(e,r,t)=>{"use strict";t.d(r,{Q:()=>o,s:()=>n});let[n,o]=(0,t(73860).Wh)("Card")},50765:(e,r,t)=>{"use strict";t.d(r,{a1:()=>a,bk:()=>s,fi:()=>o});var n=t(26335);let o=Object.freeze(["base","sm","md","lg","xl","2xl"]);function s(e,r){return Array.isArray(e)?e.map(e=>null===e?null:r(e)):(0,n.Gv)(e)?Object.keys(e).reduce((t,n)=>(t[n]=r(e[n]),t),{}):null!=e?r(e):null}function a(e,r=o){let t={};return e.forEach((e,n)=>{let o=r[n];null!=e&&(t[o]=e)}),t}},58670:(e,r,t)=>{"use strict";t.d(r,{E:()=>u});var n=t(95155),o=t(78038),s=t(85720),a=t(92622),i=t(30044),l=t(17891),c=t(47415);let u=(0,i.R)(function(e,r){let t=(0,l.V)("Text",e),{className:i,align:u,decoration:d,casing:m,...f}=(0,o.M)(e),p=(0,s.o)({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return(0,n.jsx)(c.B.p,{ref:r,className:(0,a.cx)("chakra-text",e.className),...p,...f,__css:t})});u.displayName="Text"},58727:(e,r,t)=>{"use strict";t.d(r,{z:()=>s});var n=t(95155),o=t(60078);let s=(0,t(30044).R)((e,r)=>(0,n.jsx)(o.B,{align:"center",...e,direction:"row",ref:r}));s.displayName="HStack"},60078:(e,r,t)=>{"use strict";t.d(r,{B:()=>u});var n=t(95155),o=t(9138),s=t(92622),a=t(12115),i=t(47415);let l=e=>(0,n.jsx)(i.B.div,{className:"chakra-stack__item",...e,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...e.__css}});l.displayName="StackItem";var c=t(50765);let u=(0,t(30044).R)((e,r)=>{let{isInline:t,direction:u,align:d,justify:m,spacing:f="0.5rem",wrap:p,children:h,divider:g,className:v,shouldWrapChildren:x,...y}=e,j=t?"row":null!=u?u:"column",b=(0,a.useMemo)(()=>(function(e){let{spacing:r,direction:t}=e,n={column:{my:r,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:r,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:r,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:r,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":(0,c.bk)(t,e=>n[e])}})({spacing:f,direction:j}),[f,j]),k=!!g,S=!x&&!k,w=(0,a.useMemo)(()=>{let e=(0,o.a)(h);return S?e:e.map((r,t)=>{let o=void 0!==r.key?r.key:t,s=t+1===e.length,i=(0,n.jsx)(l,{children:r},o),c=x?i:r;if(!k)return c;let u=(0,a.cloneElement)(g,{__css:b});return(0,n.jsxs)(a.Fragment,{children:[c,s?null:u]},o)})},[g,b,k,S,x,h]),_=(0,s.cx)("chakra-stack",v);return(0,n.jsx)(i.B.div,{ref:r,display:"flex",alignItems:d,justifyContent:m,flexDirection:j,flexWrap:p,gap:k?void 0:f,className:_,...y,children:w})});u.displayName="Stack"},61214:(e,r,t)=>{"use strict";t.d(r,{q:()=>o});var n=t(12115);function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{name:r,strict:t=!0,hookName:o="useContext",providerName:s="Provider",errorMessage:a,defaultValue:i}=e,l=(0,n.createContext)(i);return l.displayName=r,[l.Provider,function e(){let r=(0,n.useContext)(l);if(!r&&t){var i,c;let r=Error(null!=a?a:"".concat(o," returned `undefined`. Seems you forgot to wrap component within ").concat(s));throw r.name="ContextError",null===(i=(c=Error).captureStackTrace)||void 0===i||i.call(c,r,e),r}return r},l]}},71812:(e,r,t)=>{Promise.resolve().then(t.bind(t,13684))},73860:(e,r,t)=>{"use strict";t.d(r,{zy:()=>O,NP:()=>k,Wh:()=>N});var n=t(95155),o=t(36378),s=t(26335),a=t(3363),i=t(12224),l=t(41654);function c(e,r,t={}){let{stop:n,getKey:o}=t;return function e(t,a=[]){if((0,s.Gv)(t)||Array.isArray(t)){let s={};for(let[i,l]of Object.entries(t)){let c=o?.(i)??i,u=[...a,c];if(n?.(t,u))return r(t,a);s[c]=e(l,u)}return s}return r(t,a)}(e)}var u=t(41592),d=t(94292);let m=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function f(e,r){return(0,l.Vg)(String(e).replace(/\./g,"-"),void 0,r)}var p=t(87272),h=t(61214),g=t(77019),v=t(53425),x=t(986),y=t(13380),j=t(12115),b=t(7098);function k(e){let{cssVarsRoot:r,theme:t,children:l}=e,p=(0,j.useMemo)(()=>(function(e){let r=function(e){let{__cssMap:r,__cssVars:t,__breakpoints:n,...o}=e;return o}(e),{cssMap:t,cssVars:n}=function(e){let r=function(e){let r=(0,d.U)(e,m),t=e.semanticTokens,n=e=>u.s.includes(e)||"default"===e,o={};return c(r,(e,r)=>{null!=e&&(o[r.join(".")]={isSemantic:!1,value:e})}),c(t,(e,r)=>{null!=e&&(o[r.join(".")]={isSemantic:!0,value:e})},{stop:e=>Object.keys(e).every(n)}),o}(e),t=e.config?.cssVarPrefix,n={},o={};for(let[e,l]of Object.entries(r)){let{isSemantic:c,value:d}=l,{variable:m,reference:p}=f(e,t);if(!c){if(e.startsWith("space")){let[r,...t]=e.split("."),n=`${r}.-${t.join(".")}`,s=i._.negate(d),a=i._.negate(p);o[n]={value:s,var:m,varRef:a}}n[m]=d,o[e]={value:d,var:m,varRef:p};continue}n=a(n,Object.entries((0,s.Gv)(d)?d:{default:d}).reduce((n,[o,s])=>{if(!s)return n;let a=function(e,n){let o=[String(e).split(".")[0],n].join(".");if(!r[o])return n;let{reference:s}=f(o,t);return s}(e,`${s}`);return"default"===o?n[m]=a:n[u.T?.[o]??o]={[m]:a},n},{})),o[e]={value:p,var:m,varRef:p}}return{cssVars:n,cssMap:o}}(r);return Object.assign(r,{__cssVars:{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0",...n},__cssMap:t,__breakpoints:(0,o.d)(r.breakpoints)}),r})(t),[t]);return(0,n.jsxs)(x.a,{theme:p,children:[(0,n.jsx)(S,{root:r}),l]})}function S(e){let{root:r=":host, :root"}=e,t=[r,"[data-theme]"].join(",");return(0,n.jsx)(y.mL,{styles:e=>({[t]:e.__cssVars})})}let[w,_]=(0,h.q)({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function N(e){return(0,h.q)({name:"".concat(e,"StylesContext"),errorMessage:'useStyles: "styles" is undefined. Seems you forgot to wrap the components in "<'.concat(e,' />" ')})}function O(){let{colorMode:e}=(0,b.G6)();return(0,n.jsx)(y.mL,{styles:r=>{let t=(0,g.r)(r,"styles.global"),n=(0,v.J)(t,{theme:r,colorMode:e});if(n)return(0,p.A)(n)(r)}})}},74436:(e,r,t)=>{"use strict";t.d(r,{k5:()=>u});var n=t(12115),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=n.createContext&&n.createContext(o),a=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function l(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?l(Object(t),!0).forEach(function(r){var n,o,s;n=e,o=r,s=t[r],(o=function(e){var r=function(e,r){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:r+""}(o))in n?Object.defineProperty(n,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[o]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function u(e){return r=>n.createElement(d,i({attr:c({},e.attr)},r),function e(r){return r&&r.map((r,t)=>n.createElement(r.tag,c({key:t},r.attr),e(r.child)))}(e.child))}function d(e){var r=r=>{var t,{attr:o,size:s,title:l}=e,u=function(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(r.indexOf(n)>=0)continue;t[n]=e[n]}return t}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}(e,a),d=s||r.size||"1em";return r.className&&(t=r.className),e.className&&(t=(t?t+" ":"")+e.className),n.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,o,u,{className:t,style:c(c({color:e.color||r.color},r.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&n.createElement("title",null,l),e.children)};return void 0!==s?n.createElement(s.Consumer,null,e=>r(e)):r(o)}},75569:(e,r,t)=>{"use strict";t.d(r,{T:()=>s});var n=t(95155),o=t(60078);let s=(0,t(30044).R)((e,r)=>(0,n.jsx)(o.B,{align:"center",...e,direction:"column",ref:r}));s.displayName="VStack"},77700:(e,r,t)=>{"use strict";t.d(r,{a:()=>n});let n=(0,t(47415).B)("div");n.displayName="Box"},79788:(e,r,t)=>{"use strict";t.d(r,{F:()=>d});var n=t(95155),o=t(78038),s=t(26605),a=t(92622),i=t(4342),l=t(17891),c=t(30044),u=t(47415);let d=(0,c.R)(function(e,r){var t;let{status:c="info",addRole:d=!0,...m}=(0,o.M)(e),f=null!==(t=e.colorScheme)&&void 0!==t?t:(0,i.He)(c),p=(0,l.o)("Alert",{...e,colorScheme:f}),h=(0,s.H2)({width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...p.container});return(0,n.jsx)(i.Sw,{value:{status:c},children:(0,n.jsx)(i._N,{value:p,children:(0,n.jsx)(u.B.div,{"data-status":c,role:d?"alert":void 0,ref:r,...m,className:(0,a.cx)("chakra-alert",e.className),__css:h})})})});d.displayName="Alert"},82391:(e,r,t)=>{"use strict";t.d(r,{r:()=>l});var n=t(95155),o=t(50765),s=t(21118),a=t(25186),i=t(49839);let l=(0,t(30044).R)(function(e,r){var t,l,c;let{columns:u,spacingX:d,spacingY:m,spacing:f,minChildWidth:p,...h}=e,g=(0,a.D)(),v=p?(t=p,l=g,(0,o.bk)(t,e=>{let r=(0,i.gf)("sizes",e,"number"==typeof e?"".concat(e,"px"):e)(l);return null===e?null:"repeat(auto-fit, minmax(".concat(r,", 1fr))")})):(c=u,(0,o.bk)(c,e=>null===e?null:"repeat(".concat(e,", minmax(0, 1fr))")));return(0,n.jsx)(s.x,{ref:r,gap:f,columnGap:d,rowGap:m,templateColumns:v,...h})});l.displayName="SimpleGrid"},84492:(e,r,t)=>{"use strict";t.d(r,{y:()=>d});var n=t(95155),o=t(78038),s=t(92622),a=t(13380),i=t(30044),l=t(17891),c=t(47415);let u=(0,a.i7)({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),d=(0,i.R)((e,r)=>{let t=(0,l.V)("Spinner",e),{label:a="Loading...",thickness:i="2px",speed:d="0.45s",emptyColor:m="transparent",className:f,...p}=(0,o.M)(e),h=(0,s.cx)("chakra-spinner",f),g={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:i,borderBottomColor:m,borderLeftColor:m,animation:"".concat(u," ").concat(d," linear infinite"),...t};return(0,n.jsx)(c.B.div,{ref:r,__css:g,className:h,...p,children:a&&(0,n.jsx)(c.B.span,{srOnly:!0,children:a})})});d.displayName="Spinner"},89342:(e,r,t)=>{"use strict";t.d(r,{O:()=>h});var n=t(95155),o=t(12115),s=t(35695),a=t(96918),i=t(7161);let l=()=>{let[e,r]=(0,o.useState)(null),[t,n]=(0,o.useState)(!0),l=(0,s.useRouter)();(0,o.useEffect)(()=>{let e=localStorage.getItem("user"),t=localStorage.getItem("token");if(t&&!document.cookie.includes("token=")&&(document.cookie="token=".concat(t,"; path=/; ").concat("secure;"," samesite=strict; max-age=86400")),e)try{let t=JSON.parse(e);t&&t.permissions&&(r(t),n(!1))}catch(e){console.error("解析本地用户数据失败:",e)}c()},[]);let c=async()=>{try{let e=(await a.A.get("/user/current")).data;if(e&&e.permissions){let t={...e,permissions:Array.isArray(e.permissions)?e.permissions:[]};r(t),localStorage.setItem("user",JSON.stringify(t))}else{let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);r(t)}else l.push("/auth/login")}}catch(t){if(console.error("认证检查失败:",t),(0,i.HY)(t)){r(null),(0,i.Hl)();return}let e=localStorage.getItem("user");e?r(JSON.parse(e)):l.push("/auth/login")}finally{n(!1)}},u=(r,t)=>!!e&&!!e.permissions&&e.permissions.some(e=>t?e.resource===r&&e.action===t:e.resource===r);return{user:e,loading:t,hasPermission:u,hasManagerPermission:()=>u("MANAGER"),logout:()=>{localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),document.cookie="token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",r(null),l.push("/auth/login")},checkAuth:c}};var c=t(77700),u=t(84492),d=t(79788),m=t(21688),f=t(75569),p=t(58670);let h=e=>{let{children:r,requiredPermission:t,requireManager:o=!1,fallbackPath:a="/main/dashboard"}=e,{user:i,loading:h,hasPermission:g,hasManagerPermission:v}=l(),x=(0,s.useRouter)();return h?(0,n.jsx)(c.a,{minH:"100vh",display:"flex",alignItems:"center",justifyContent:"center",children:(0,n.jsx)(u.y,{size:"lg",color:"blue.500"})}):i?o&&!v()?(0,n.jsx)(c.a,{p:8,children:(0,n.jsxs)(d.F,{status:"error",children:[(0,n.jsx)(m._,{}),(0,n.jsxs)(f.T,{align:"start",spacing:2,children:[(0,n.jsx)(p.E,{fontWeight:"bold",children:"访问被拒绝"}),(0,n.jsx)(p.E,{children:"您没有访问此页面的权限。需要管理员权限。"})]})]})}):t&&!g(t.resource,t.action)?(0,n.jsx)(c.a,{p:8,children:(0,n.jsxs)(d.F,{status:"error",children:[(0,n.jsx)(m._,{}),(0,n.jsxs)(f.T,{align:"start",spacing:2,children:[(0,n.jsx)(p.E,{fontWeight:"bold",children:"访问被拒绝"}),(0,n.jsxs)(p.E,{children:["您没有访问此页面的权限。需要权限: ",t.resource,t.action&&" - ".concat(t.action)]})]})]})}):(0,n.jsx)(n.Fragment,{children:r}):(x.push("/auth/login"),null)}},94292:(e,r,t)=>{"use strict";function n(e,r){let t={};for(let n of r)n in e&&(t[n]=e[n]);return t}t.d(r,{U:()=>n})},96918:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});var n=t(23464),o=t(7161),s=t(87358);let a=n.A.create({baseURL:s.env.NEXT_PUBLIC_API_URL||"http://localhost:8081/api/v1",timeout:36e5,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{{let r=localStorage.getItem("token");r&&(e.headers.Authorization="Bearer ".concat(r))}return console.log("发送请求:",{url:e.url,method:e.method,baseURL:e.baseURL,headers:e.headers,fullPath:"".concat(e.baseURL).concat(e.url)}),e},e=>(console.error("请求拦截器错误:",e),Promise.reject(e))),a.interceptors.response.use(e=>{console.log("收到响应:",{url:e.config.url,status:e.status,data:e.data});let r=e.data;return r&&"object"==typeof r&&void 0!==r.code?0!==r.code&&200!==r.code?(console.error("API响应错误:",r),Promise.reject(Error(r.message||"请求失败"))):r:e},e=>{var r,t,n;return console.error("请求失败:",{url:null===(r=e.config)||void 0===r?void 0:r.url,message:e.message,response:null===(t=e.response)||void 0===t?void 0:t.data}),e.response?401===e.response.status?(0,o.Hl)():console.error("API错误:",(null===(n=e.response.data)||void 0===n?void 0:n.message)||"请求失败"):e.request?console.error("网络错误: 请检查网络连接"):console.error("请求错误:",e.message||"发生未知错误"),Promise.reject(e)});let i=a}},e=>{var r=r=>e(e.s=r);e.O(0,[844,8791,3464,8441,1684,7358],()=>r(71812)),_N_E=e.O()}]);