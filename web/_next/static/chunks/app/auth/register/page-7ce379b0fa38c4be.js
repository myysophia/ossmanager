(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[983],{11649:(e,s,r)=>{"use strict";r.d(s,{D:()=>c});var a=r(95155),l=r(78038),n=r(92622),i=r(30044),t=r(17891),o=r(47415);let c=(0,i.R)(function(e,s){let r=(0,t.V)("Heading",e),{className:i,...c}=(0,l.M)(e);return(0,a.jsx)(o.B.h2,{ref:s,className:(0,n.cx)("chakra-heading",e.className),...c,__css:r})});c.displayName="Heading"},22900:(e,s,r)=>{"use strict";r.d(s,{m:()=>c});var a=r(95155),l=r(78038),n=r(92622),i=r(30044),t=r(17891),o=r(47415);let c=(0,i.R)(function(e,s){let{className:r,centerContent:i,...c}=(0,l.M)(e),d=(0,t.V)("Container",e);return(0,a.jsx)(o.B.div,{ref:s,className:(0,n.cx)("chakra-container",r),...c,__css:{...d,...i&&{display:"flex",flexDirection:"column",alignItems:"center"}}})});c.displayName="Container"},23764:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>R});var a=r(95155),l=r(12115),n=r(23006),i=r(22900),t=r(77700),o=r(60078),c=r(11649),d=r(26418),u=r(79175),m=r(33636),h=r(52019),p=r(77978),x=r(58670),f=r(78038),j=r(92622),v=r(30044),_=r(17891),g=r(47415);let w=(0,v.R)(function(e,s){let r=(0,_.V)("Link",e),{className:l,isExternal:n,...i}=(0,f.M)(e);return(0,a.jsx)(g.B.a,{target:n?"_blank":void 0,rel:n?"noopener":void 0,ref:s,className:(0,j.cx)("chakra-link",l),...i,__css:r})});w.displayName="Link";var N=r(35695),y=r(14509);function R(){let e=(0,N.useRouter)(),s=(0,n.d)(),[r,f]=(0,l.useState)(!1),[j,v]=(0,l.useState)({username:"",email:"",password:"",confirmPassword:"",real_name:""}),[_,g]=(0,l.useState)({}),R=()=>{let e={};return j.username.trim()||(e.username="用户名不能为空"),j.email.trim()?/\S+@\S+\.\S+/.test(j.email)||(e.email="请输入有效的邮箱地址"):e.email="邮箱不能为空",j.password?j.password.length<6&&(e.password="密码至少需要6个字符"):e.password="密码不能为空",j.password!==j.confirmPassword&&(e.confirmPassword="两次输入的密码不一致"),g(e),0===Object.keys(e).length},b=async r=>{if(r.preventDefault(),R()){f(!0);try{await y.pq.register({username:j.username,password:j.password,email:j.email,real_name:j.real_name}),s({title:"注册成功",description:"请使用您的账号登录",status:"success",duration:3e3,isClosable:!0}),e.push("/auth/login")}catch(e){s({title:"注册失败",description:e instanceof Error?e.message:"注册处理失败，请稍后再试",status:"error",duration:3e3,isClosable:!0})}finally{f(!1)}}},k=e=>{let{name:s,value:r}=e.target;v(e=>({...e,[s]:r})),_[s]&&g(e=>({...e,[s]:""}))};return(0,a.jsx)(i.m,{maxW:"container.sm",py:10,children:(0,a.jsx)(t.a,{p:8,borderWidth:1,borderRadius:"lg",boxShadow:"lg",children:(0,a.jsxs)(o.B,{spacing:6,as:"form",onSubmit:b,children:[(0,a.jsx)(c.D,{size:"lg",children:"注册"}),(0,a.jsxs)(d.MJ,{isRequired:!0,isInvalid:!!_.username,children:[(0,a.jsx)(u.l,{children:"用户名"}),(0,a.jsx)(m.p,{name:"username",value:j.username,onChange:k,placeholder:"请输入用户名"}),(0,a.jsx)(h.Wt,{children:_.username})]}),(0,a.jsxs)(d.MJ,{isRequired:!0,isInvalid:!!_.email,children:[(0,a.jsx)(u.l,{children:"邮箱"}),(0,a.jsx)(m.p,{name:"email",type:"email",value:j.email,onChange:k,placeholder:"请输入邮箱"}),(0,a.jsx)(h.Wt,{children:_.email})]}),(0,a.jsxs)(d.MJ,{children:[(0,a.jsx)(u.l,{children:"真实姓名"}),(0,a.jsx)(m.p,{name:"real_name",value:j.real_name,onChange:k,placeholder:"请输入真实姓名（可选）"})]}),(0,a.jsxs)(d.MJ,{isRequired:!0,isInvalid:!!_.password,children:[(0,a.jsx)(u.l,{children:"密码"}),(0,a.jsx)(m.p,{name:"password",type:"password",value:j.password,onChange:k,placeholder:"请输入密码"}),(0,a.jsx)(h.Wt,{children:_.password})]}),(0,a.jsxs)(d.MJ,{isRequired:!0,isInvalid:!!_.confirmPassword,children:[(0,a.jsx)(u.l,{children:"确认密码"}),(0,a.jsx)(m.p,{name:"confirmPassword",type:"password",value:j.confirmPassword,onChange:k,placeholder:"请再次输入密码"}),(0,a.jsx)(h.Wt,{children:_.confirmPassword})]}),(0,a.jsx)(p.$,{type:"submit",colorScheme:"blue",width:"full",loadingText:"注册中...",isLoading:r,children:"注册"}),(0,a.jsxs)(x.E,{children:["已有账号？"," ",(0,a.jsx)(w,{href:"/auth/login",color:"blue.500",children:"立即登录"})]})]})})})}},24355:(e,s,r)=>{Promise.resolve().then(r.bind(r,23764))},33636:(e,s,r)=>{"use strict";r.d(s,{p:()=>d});var a=r(95155),l=r(78038),n=r(92622),i=r(17248),t=r(30044),o=r(17891),c=r(47415);let d=(0,t.R)(function(e,s){let{htmlSize:r,...t}=e,d=(0,o.o)("Input",t),u=(0,l.M)(t),m=(0,i.t)(u),h=(0,n.cx)("chakra-input",e.className);return(0,a.jsx)(c.B.input,{size:r,...m,__css:d.field,ref:s,className:h})});d.displayName="Input",d.id="Input"},35695:(e,s,r)=>{"use strict";var a=r(18999);r.o(a,"usePathname")&&r.d(s,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(s,{useRouter:function(){return a.useRouter}})},52019:(e,s,r)=>{"use strict";r.d(s,{Wt:()=>p});var a=r(95155),l=r(78038),n=r(61214),i=r(92622),t=r(26418),o=r(3740),c=r(30044),d=r(17891),u=r(47415);let[m,h]=(0,n.q)({name:"FormErrorStylesContext",errorMessage:"useFormErrorStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<FormError />\" "}),p=(0,c.R)((e,s)=>{let r=(0,d.o)("FormError",e),n=(0,l.M)(e),o=(0,t.Uc)();return(null==o?void 0:o.isInvalid)?(0,a.jsx)(m,{value:r,children:(0,a.jsx)(u.B.div,{...null==o?void 0:o.getErrorMessageProps(n,s),className:(0,i.cx)("chakra-form__error-message",e.className),__css:{display:"flex",alignItems:"center",...r.text}})}):null});p.displayName="FormErrorMessage",(0,c.R)((e,s)=>{let r=h(),l=(0,t.Uc)();if(!(null==l?void 0:l.isInvalid))return null;let n=(0,i.cx)("chakra-form__error-icon",e.className);return(0,a.jsx)(o.I,{ref:s,"aria-hidden":!0,...e,__css:r.icon,className:n,children:(0,a.jsx)("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}).displayName="FormErrorIcon"},58670:(e,s,r)=>{"use strict";r.d(s,{E:()=>d});var a=r(95155),l=r(78038),n=r(85720),i=r(92622),t=r(30044),o=r(17891),c=r(47415);let d=(0,t.R)(function(e,s){let r=(0,o.V)("Text",e),{className:t,align:d,decoration:u,casing:m,...h}=(0,l.M)(e),p=(0,n.o)({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return(0,a.jsx)(c.B.p,{ref:s,className:(0,i.cx)("chakra-text",e.className),...p,...h,__css:r})});d.displayName="Text"},79175:(e,s,r)=>{"use strict";r.d(s,{l:()=>d});var a=r(95155),l=r(78038),n=r(92622),i=r(26418),t=r(30044),o=r(17891),c=r(47415);let d=(0,t.R)(function(e,s){var r;let t=(0,o.V)("FormLabel",e),d=(0,l.M)(e),{className:m,children:h,requiredIndicator:p=(0,a.jsx)(u,{}),optionalIndicator:x=null,...f}=d,j=(0,i.Uc)(),v=null!==(r=null==j?void 0:j.getLabelProps(f,s))&&void 0!==r?r:{ref:s,...f};return(0,a.jsxs)(c.B.label,{...v,className:(0,n.cx)("chakra-form__label",d.className),__css:{display:"block",textAlign:"start",...t},children:[h,(null==j?void 0:j.isRequired)?p:x]})});d.displayName="FormLabel";let u=(0,t.R)(function(e,s){let r=(0,i.Uc)(),l=(0,i.TP)();if(!(null==r?void 0:r.isRequired))return null;let t=(0,n.cx)("chakra-form__required-indicator",e.className);return(0,a.jsx)(c.B.span,{...null==r?void 0:r.getRequiredIndicatorProps(e,s),__css:l.requiredIndicator,className:t})});u.displayName="RequiredIndicator"}},e=>{var s=s=>e(e.s=s);e.O(0,[8791,6829,6980,7039,2210,3464,4509,8441,1684,7358],()=>s(24355)),_N_E=e.O()}]);